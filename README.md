# Capstone_GuardiansofFarm

24-2) 산학실전캡스톤1\_작물의 품질 상태를 판별하는 이미지 프로세싱 및 인공지능 기술

# 스마트팜 잎 개수 및 질병 탐지 시스템

이 프로젝트는 스마트팜 환경에서 작물의 잎 개수를 정확하게 파악하고, 비정상 잎(질병 및 병충해)을 탐지하기 위한 경량화된 객체 탐지 모델을 개발하는 것을 목표로 합니다. 이를 통해 농업 관리의 자동화와 정확성을 높이고, 작물 생육 상태를 실시간으로 모니터링하며 질병 발생에 신속하게 대응할 수 있는 기반을 제공합니다.

## 필요성

- 최근 스마트팜 시장이 확대되며 작물 성장 과정에서 질병 인식과 해결의 중요성이 증가하고 있습니다.
- 식물 질병은 작물 수확량, 품질, 수익성에 심각한 영향을 미칠 수 있습니다.
- 기존의 수동 탐지는 시간이 많이 소요되고 효율성이 떨어지며, 자동화된 탐지 기술이 요구됩니다.

## 주요 기능

- **작물의 잎 개수 정량적 파악**: 이미지 분석을 통해 작물의 잎 개수를 자동으로 계산합니다.
- **비정상 잎 탐지**: 질병이나 병충해로 인해 발생하는 잎의 이상 상태를 식별합니다.
- **실시간 상태 메시지 제공**: 탐지 결과를 바탕으로 작물 상태를 "Normal", "Caution", "Warning" 등으로 구분하여 제공합니다.
- **성장 예측 모델 개발 가능**: 수집된 데이터를 기반으로 성장 예측 모델을 추가 개발할 수 있습니다.

## 사용 데이터 및 모델

- **모델**: YOLOv8
- **데이터셋**:
  - 기업체 제공 데이터
  - Kaggle 오픈 소스 데이터
  - 실생활 수집 데이터
  - 데이터 증강(Augmentation)을 통해 약 60배 이상의 데이터 증량
- **특징**:
  - 객체 라벨링 및 데이터셋 증강 진행
  - RoboFlow를 활용한 라벨링

## 코드 동작 방식

### 1. 입력 이미지 분석

- `chocomint` 폴더 내의 이미지 파일들을 불러와 YOLO 모델을 사용하여 객체 탐지를 수행합니다.
- 탐지된 객체의 위치와 클래스를 기반으로 이미지를 분석합니다.

### 2. 클래스별 색상 지정

- 각 클래스(예: `leaf`, `diseased_leaf`)에 대해 고유한 색상이 지정됩니다.
- 결과 이미지에 탐지된 객체의 경계 상자와 클래스 이름이 표시됩니다.

### 3. 상태 메시지 생성

- 탐지된 `leaf`와 `diseased_leaf`의 개수를 기반으로 비율을 계산하여 작물의 상태를 판단합니다.
  - **80% 이상 정상 잎**: Normal (초록색)
  - **60-80%**: Caution (노란색)
  - **40-60%**: Warning (주황색)
  - **20-40%**: Danger (빨간색)
  - **20% 미만**: Critical (보라색)
- 상태 메시지가 이미지 우측 상단에 표시됩니다.

### 4. 결과 저장

- 분석된 이미지는 `chocomint_result` 폴더에 저장되며, 파일명은 원본 이미지 파일명에 `_output`이 추가된 형태입니다.

## 설치 방법

### 1. 리포지토리 클론하기

```bash
git clone https://github.com/andimsewon/Capstone_GuardiansofFarm
cd Capstone_GuardiansofFarm
```

### 2. 필요한 라이브러리 설치하기

```bash
pip install -r requirements.txt
```

## 코드 실행 방법

### 1. 입력 이미지 폴더 준비하기

- 프로젝트 디렉토리 내에 `chocomint` 폴더에 분석할 이미지 파일들을 해당 폴더에 넣습니다.

### 2. 코드 실행하기

- 프로젝트 경로에서 아래 명령어를 실행합니다.
- 결과 이미지가 저장될 `chocomint_result` 폴더가 코드 실행 시 자동으로 생성됩니다.

```bash
python detector.py
```

## 결과 확인하기

코드 실행이 완료되면, `chocomint_result` 폴더에 다음과 같은 정보가 포함된 결과 이미지가 저장됩니다:

- 각 이미지에 대해 탐지된 잎 개수
- 비정상 잎 탐지 결과
- 상태 메시지 (예: Normal, Caution 등)

## 주요 성과 및 개선 방향

### 주요 성과

- YOLOv8을 활용한 경량 모델 개발로 정상/비정상 잎 탐지 시스템 구현
- Precision, Recall, F1 Score에서 우수한 성능 달성
  - 평균 mAP@0.5: 0.810
  - Diseased 클래스 AP: 0.846
  - Healthy 클래스 AP: 0.774

### 개선 방향

- 다양한 비정상 잎 데이터 추가 수집 및 학습
- IoT 기반 스마트팜 시스템과의 통합으로 실시간 모니터링 기능 강화
- 일반 사용자를 위한 상용화 가능성 확대

## 기여 방법

이 프로젝트에 기여하고 싶으신 분들은 다음 단계를 따라주세요:

1. 이 리포지토리를 포크합니다.
2. 변경 사항을 추가합니다.
3. Pull Request를 제출합니다.

---

이 프로젝트는 스마트팜의 효율성을 극대화하고, 농업 자동화를 위한 혁신적인 솔루션을 제공하는 데 중점을 둡니다. 여러분의 기여를 환영합니다!
